# Redis configuration for payments idempotency system

# Memory management
maxmemory 256mb
maxmemory-policy allkeys-lru

# Persistence (AOF for durability)
appendonly yes
appendfsync everysec
no-appendfsync-on-rewrite no

# Snapshotting
save 900 1
save 300 10
save 60 10000

# Networking
bind 0.0.0.0
protected-mode no
tcp-backlog 511
tcp-keepalive 300

# Logging
loglevel notice

# Connection limits
maxclients 1000

# Slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# Keyspace notifications (enable expired key events for idempotency TTL monitoring)
notify-keyspace-events "Ex"
